<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Contrato Preenchido – Help!</title>
  <style>
    body{margin:0;background:#fff;font:500 12px/1.45 'Open Sans',ui-sans-serif,system-ui;color:#111}
    .page{width:595pt; height:842pt; padding:40pt 44pt; box-sizing:border-box; position:relative;}
    h1{font-size:18px;margin:0 0 8px;font-family:'Montserrat',sans-serif}
    h2{font-size:14px;margin:16px 0 8px;font-family:'Montserrat',sans-serif}
    .muted{color:#555} .mb{margin-bottom:10px}
    .table{width:100%;border-collapse:collapse}
    .table td,.table th{border:1px solid #ddd;padding:6px 8px;text-align:left}
    .sign{display:flex;gap:28px;margin-top:24px}
    .sign .box{flex:1} .hr{border-top:1px solid #aaa;margin-top:40px}
    .foot{position:absolute;bottom:18pt;left:44pt;right:44pt;font-size:9px;color:#666;display:flex;justify-content:space-between}
    .foot .id{font-weight:600}
    .opt{display:inline} .hidden{display:none}
    /* Fallback visual de erro */
    .invalid{color:#b00020; text-decoration: underline dotted;}
  </style>
</head>
<body>

  <!-- Página 1 -->
  <div class="page">
    <h1>Contrato de Prestação de Serviços de Marketing Digital</h1>
    <p class="muted mb">Data: <span data-date>{{DATA}}</span></p>

    <h2>1. Partes</h2>
    <p>
      <strong>Contratante:</strong>
      <span data-razao>{{RAZAO}}</span>
      (<span data-pessoa>{{PESSOA_TIPO}}</span>),
      CPF/CNPJ <span data-doc data-validate="doc">{{DOC_ID}}</span>
      <span class="opt" data-opt="rg"> • RG: <span data-rg>{{RG}}</span></span>,
      <span class="opt" data-opt="endereco">Endereço: <span data-endereco>{{ENDERECO}}</span></span>,
      e-mail <span data-email>{{EMAIL}}</span>,
      telefone <span data-fone data-validate="fone">{{FONE}}</span>.
      <span class="opt" data-opt="representante"> Representado por <span data-representante>{{REPRESENTANTE}}</span> (se aplicável).</span>
    </p>
    <p><strong>Contratada:</strong> HELP! AGÊNCIA DE MARKETING.</p>

    <h2>2. Natureza e Alcance</h2>
    <p>Contrato regido pelo Código Civil. A relação é estritamente empresarial/profissional, não caracterizando relação de consumo.</p>

    <h2>3. Objeto</h2>
    <p>Prestação de serviços de marketing digital conforme plano escolhido (Anexo I). Reforço Estratégico opcional (Anexo II).</p>

    <h2>4. Escopo e Limites</h2>
    <p>4.1. Escopo no Anexo I.<br>
       4.2. Criativos para tráfego: produção contínua conforme performance. Conteúdo para redes sociais (quando incluso) segue a quantidade do Anexo I.<br>
       4.3. Itens fora do escopo via Change Request (CR).<br>
       4.4. Verba de mídia não inclusa.</p>

    <h2>5. Obrigações da Contratada</h2>
    <p>Diligência técnica; SLA 24h úteis para resposta; confidencialidade; relatórios mensais.</p>

    <h2>6. Obrigações do Contratante</h2>
    <p>Fornecer materiais/acessos em até 48h úteis; pagamentos em dia; materiais sem violação de terceiros.</p>

    <div class="foot">
      <div class="id">ID: {{DOCID}}</div>
      <div><span data-razao>{{RAZAO}}</span> • {{DATETIME}}</div>
      <div>Página 1/4</div>
    </div>
  </div>

  <!-- Página 2 -->
  <div class="page">
    <h2>7. Captação</h2>
    <p>1 sessão mensal de captação de fotos/vídeos no estabelecimento, com edição básica. Custos de deslocamento fora de Itapetininga-SP definidos previamente entre as partes.</p>

    <h2>8. Social Media (apenas Help! Prime)</h2>
    <p>Gestão de Instagram: 1 post imagem + 1 post vídeo/semana (≈8/mês). Sem interação DMs/comentários; sem produção avançada; outras redes não incluídas.</p>

    <h2>9. Propriedade Intelectual</h2>
    <p>Metodologias e templates são da Contratada. Materiais finais aprovados: licença de uso não exclusiva e por prazo indeterminado, condicionada à adimplência. Arquivos editáveis/brutos não incluídos.</p>

    <h2>10. Resultados e Responsabilidade</h2>
    <p>Não há garantia de resultados específicos. Responsabilidade limitada ao valor pago nos 3 meses anteriores ao evento.</p>

    <h2>11. Confidencialidade</h2>
    <p>Sigilo por 5 anos após término.</p>

    <h2>12. Conformidade e LGPD</h2>
    <p>Contratante é Controlador; Contratada é Operadora. O Contratante declara possuir base legal para tratamento de dados. Uso indevido pelo Contratante não é responsabilidade da Contratada.</p>

    <h2>13. Exclusividade e Não-Aliciamento</h2>
    <p>Sem exclusividade salvo aditivo. Não-aliciamento por 12 meses; multa de 3 remunerações.</p>

    <h2>14. Remuneração e Reajuste</h2>
    <p>Plano contratado: <strong>{{PLANO}}</strong> — <strong>{{VALOR}}</strong>. Reajuste anual IPCA. Atrasos: multa 2% + juros 1% a.m. pro rata + correção.</p>

    <div class="foot">
      <div class="id">ID: {{DOCID}}</div>
      <div><span data-razao>{{RAZAO}}</span> • {{DATETIME}}</div>
      <div>Página 2/4</div>
    </div>
  </div>

  <!-- Página 3 -->
  <div class="page">
    <h2>15. Vigência e Rescisão</h2>
    <p>Vigência inicial 90 dias; renovação mensal automática. Rescisão com 30 dias. Durante vigência inicial: pagamento proporcional.</p>

    <h2>16. Foro</h2>
    <p>Itapetininga-SP.</p>

    <h2>Anexo I – Planos e Benefícios</h2>
    <table class="table">
      <thead><tr><th>Benefício</th><th>Help! Start</th><th>Help! Prime</th></tr></thead>
      <tbody>
        <tr><td>Tráfego Pago (Meta Ads)</td><td>Inclui</td><td>Inclui</td></tr>
        <tr><td>Captação mensal (1 sessão)</td><td>Inclui</td><td>Inclui</td></tr>
        <tr><td>Criativos para anúncios</td><td>Conforme performance</td><td>Conforme performance</td></tr>
        <tr><td>Relatório + reunião mensal</td><td>Inclui</td><td>Inclui</td></tr>
        <tr><td>Gestão de Instagram</td><td>—</td><td>8/mês</td></tr>
        <tr><td>Planejamento editorial</td><td>—</td><td>Inclui</td></tr>
        <tr><td>Integração anúncio + orgânico</td><td>—</td><td>Inclui</td></tr>
        <tr><td>Produção de conteúdo extra</td><td>Não Inclui</td><td>Não Inclui</td></tr>
        <tr><td>Gestão de outras plataformas Ads</td><td>Não Inclui</td><td>Não Inclui</td></tr>
      </tbody>
    </table>

    <h2>Anexo II – Reforço Estratégico</h2>
    <p><strong>Estratégia Comercial – R$ 1.500/mês.</strong> Consultoria personalizada: ouvimos a fundo o seu negócio, avaliamos processos, cortamos o que não funciona e implantamos ações para vender mais, gastar menos e otimizar cada etapa da operação.</p>

    <div class="sign">
      <div class="box">
        <div class="hr"></div>
        <div><strong>HELP! AGÊNCIA DE MARKETING</strong><br/>Contratada</div>
      </div>
      <div class="box">
        <div class="hr"></div>
        <div><strong><span data-razao>{{RAZAO}}</span></strong><br/>Contratante</div>
      </div>
    </div>

    <div style="margin-top:18px">
      <div><strong>Assinatura do Contratante:</strong></div>
      <div>{{ASSINATURA}}</div>
      <div class="muted">Assinado digitalmente em <span data-date>{{DATA}}</span></div>
      <div class="muted opt" data-opt="assinante-doc">CPF/CNPJ do assinante: <span data-doc data-validate="doc">{{DOC_ID}}</span></div>
      <div class="muted opt" data-opt="assinante-rg">RG do assinante: <span data-rg-ass>{{RG_ASS}}</span></div>
    </div>

    <div class="foot">
      <div class="id">ID: {{DOCID}}</div>
      <div><span data-razao>{{RAZAO}}</span> • {{DATETIME}}</div>
      <div>Página 3/4</div>
    </div>
  </div>

  <!-- Página 4: Próximos passos -->
  <div class="page">
    <h2>Próximos Passos</h2>
    <ol>
      <li>Envio de briefing e acessos (em até 24h úteis).</li>
      <li>Configuração/validação das contas de anúncio.</li>
      <li>Agenda de captação (data sugerida em até 7 dias).</li>
      <li>Primeira rodada de criativos e aprovação.</li>
      <li>Go-live das campanhas e monitoramento diário inicial.</li>
      <li>Relatório de 30 dias com plano de otimização.</li>
    </ol>
    <p class="muted">Dúvidas? Fale com a Help! pelo WhatsApp oficial.</p>

    <div class="foot">
      <div class="id">ID: {{DOCID}}</div>
      <div><span data-razao>{{RAZAO}}</span> • {{DATETIME}}</div>
      <div>Página 4/4</div>
    </div>
  </div>

  <script>
    (function(){
      // ————— Helpers
      const getDigits = s => (s||"").toString().replace(/\D+/g,'');
      const isEmpty = s => !s || String(s).trim()==='' || String(s).includes('{{');

      // Máscaras
      function maskCPF(d){ return d.replace(/(\d{3})(\d{3})(\d{3})(\d{2})/,'$1.$2.$3-$4'); }
      function maskCNPJ(d){ return d.replace(/(\d{2})(\d{3})(\d{3})(\d{4})(\d{2})/,'$1.$2.$3/$4-$5'); }
      function maskDoc(s){
        const d = getDigits(s);
        if(d.length===11) return maskCPF(d);
        if(d.length===14) return maskCNPJ(d);
        return s;
      }
      function maskPhone(s){
        const d = getDigits(s);
        if(d.length===11) return d.replace(/(\d{2})(\d{5})(\d{4})/,'($1) $2-$3');
        if(d.length===10) return d.replace(/(\d{2})(\d{4})(\d{4})/,'($1) $2-$3');
        return s;
      }

      // Validações (inclui dígitos verificadores de CPF/CNPJ)
      function validateCPF(value){
        const d = getDigits(value);
        if(d.length!==11 || /^(\d)\1{10}$/.test(d)) return false;
        let sum=0; for(let i=0;i<9;i++) sum+=parseInt(d[i])*(10-i);
        let r = (sum*10)%11; if(r===10) r=0; if(r!==parseInt(d[9])) return false;
        sum=0; for(let i=0;i<10;i++) sum+=parseInt(d[i])*(11-i);
        r = (sum*10)%11; if(r===10) r=0; return r===parseInt(d[10]);
      }
      function validateCNPJ(value){
        const d = getDigits(value);
        if(d.length!==14 || /^(\d)\1{13}$/.test(d)) return false;
        const calc = (len) => {
          let factors = (len===12) ? [5,4,3,2,9,8,7,6,5,4,3,2] : [6,5,4,3,2,9,8,7,6,5,4,3,2];
          let sum = 0;
          for(let i=0;i<factors.length;i++) sum += parseInt(d[i]) * factors[i];
          let r = sum % 11;
          return (r < 2) ? 0 : 11 - r;
        };
        const dv1 = calc(12); if(dv1 !== parseInt(d[12])) return false;
        const dv2 = calc(13); return dv2 === parseInt(d[13]);
      }
      function validateDoc(value){
        const digits = getDigits(value);
        if(digits.length===11) return validateCPF(digits);
        if(digits.length===14) return validateCNPJ(digits);
        return false;
      }
      function validatePhone(value){
        const d = getDigits(value);
        return d.length===10 || d.length===11;
      }

      // Marca inválido (visual)
      function markInvalid(el, msg){
        el.classList.add('invalid');
        el.setAttribute('title', msg);
        el.setAttribute('aria-label', msg);
      }

      // ————— Formatação e validação
      // DOCs (contratante + assinante)
      document.querySelectorAll('[data-doc]').forEach(el=>{
        const raw = el.textContent;
        const masked = maskDoc(raw);
        el.textContent = masked;
      });

      // Telefone
      document.querySelectorAll('[data-fone]').forEach(el=>{
        el.textContent = maskPhone(el.textContent);
      });

      // Esconde blocos opcionais se valor vazio
      const optionals = [
        {wrap:'[data-opt="rg"]', valueSel:'[data-rg]'},
        {wrap:'[data-opt="representante"]', valueSel:'[data-representante]'},
        {wrap:'[data-opt="endereco"]', valueSel:'[data-endereco]'},
        {wrap:'[data-opt="assinante-doc"]', valueSel:'[data-doc]'},
        {wrap:'[data-opt="assinante-rg"]', valueSel:'[data-rg-ass]'},
      ];
      optionals.forEach(({wrap,valueSel})=>{
        document.querySelectorAll(wrap).forEach(w=>{
          const vEl = w.querySelector(valueSel);
          const val = vEl ? vEl.textContent : '';
          if(isEmpty(val)){ w.classList.add('hidden'); }
        });
      });

      // Inferir Pessoa Física/Jurídica se vazio
      document.querySelectorAll('[data-pessoa]').forEach(el=>{
        if(isEmpty(el.textContent)){
          const parent = el.closest('p') || document;
          const docEl = parent.querySelector('[data-doc]');
          const d = docEl ? getDigits(docEl.textContent) : '';
          if(d.length===11) el.textContent = 'Pessoa Física';
          if(d.length===14) el.textContent = 'Pessoa Jurídica';
        }
      });

      // Limpa placeholders literais remanescentes
      document.querySelectorAll('[data-razao],[data-email],[data-date],[data-endereco],[data-representante],[data-rg],[data-rg-ass]').forEach(el=>{
        if(/\{\{.+\}\}/.test(el.textContent||'')) el.textContent = '';
      });

      // ————— VALIDAÇÃO com fallback visual
      document.querySelectorAll('[data-validate="doc"]').forEach(el=>{
        const ok = validateDoc(el.textContent);
        if(!ok){
          markInvalid(el, 'Documento inválido: use CPF (11 dígitos) ou CNPJ (14) com DV válido.');
        }
      });

      document.querySelectorAll('[data-validate="fone"]').forEach(el=>{
        const ok = validatePhone(el.textContent);
        if(!ok){
          markInvalid(el, 'Telefone inválido: esperado DDD + número (10 ou 11 dígitos).');
        }
      });
    })();
  </script>

</body>
</html>
